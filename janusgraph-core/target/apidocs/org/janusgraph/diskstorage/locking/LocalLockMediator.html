<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (15) on Fri Nov 26 15:13:43 CST 2021 -->
<title>LocalLockMediator (JanusGraph-Core: Core Library for JanusGraph 0.6.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-11-26">
<meta name="description" content="declaration: package: org.janusgraph.diskstorage.locking, class: LocalLockMediator">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","\u6240\u6709\u65B9\u6CD5"],2:["t2","\u5B9E\u4F8B\u65B9\u6CD5"],8:["t4","\u5177\u4F53\u65B9\u6CD5"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="导航">
<li><a href="../../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="nav-bar-cell1-rev">类</li>
<li><a href="class-use/LocalLockMediator.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="sub-nav-list">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">程序包</span>&nbsp;<a href="package-summary.html">org.janusgraph.diskstorage.locking</a></div>
<h1 title="类 LocalLockMediator" class="title">类 LocalLockMediator&lt;T&gt;</h1>
</div>
<div class="inheritance" title="继承树"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="java.lang中的类或接口" class="external-link">java.lang.Object</a>
<div class="inheritance">org.janusgraph.diskstorage.locking.LocalLockMediator&lt;T&gt;</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="type-name-label">LocalLockMediator&lt;T&gt;</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="java.lang中的类或接口" class="external-link">Object</a></pre>
<div class="block">This class resolves lock contention between two transactions on the same JVM.
 <p>
 This is not just an optimization to reduce network traffic. Locks written by
 JanusGraph to a distributed key-value store contain an identifier, the "Rid",
 which is unique only to the process level. The Rid can't tell which
 transaction in a process holds any given lock. This class prevents two
 transactions in a single process from concurrently writing the same lock to a
 distributed key-value store.</div>
<dl class="notes">
<dt>作者:</dt>
<dd>Dan LaRocque (dalaro@hopcount.org)</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>构造器概要</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>构造器</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">构造器</th>
<th class="col-last" scope="col">说明</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E(java.lang.String,org.janusgraph.diskstorage.util.time.TimestampProvider)">LocalLockMediator</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;name,
<a href="../util/time/TimestampProvider.html" title="org.janusgraph.diskstorage.util.time中的接口">TimestampProvider</a>&nbsp;times)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>方法概要</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">所有方法</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">实例方法</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">具体方法</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">修饰符和类型</th>
<th class="col-second" scope="col">方法</th>
<th class="col-last" scope="col">说明</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#lock(org.janusgraph.diskstorage.util.KeyColumn,T,java.time.Instant)">lock</a></span>&#8203;(<a href="../util/KeyColumn.html" title="org.janusgraph.diskstorage.util中的类">KeyColumn</a>&nbsp;kc,
<a href="LocalLockMediator.html" title="LocalLockMediator中的类型参数">T</a>&nbsp;requester,
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="java.time中的类或接口" class="external-link">Instant</a>&nbsp;expires)</code></th>
<td class="col-last">
<div class="block">Acquire the lock specified by <code>kc</code>.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#toString()">toString</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#unlock(org.janusgraph.diskstorage.util.KeyColumn,T)">unlock</a></span>&#8203;(<a href="../util/KeyColumn.html" title="org.janusgraph.diskstorage.util中的类">KeyColumn</a>&nbsp;kc,
<a href="LocalLockMediator.html" title="LocalLockMediator中的类型参数">T</a>&nbsp;requester)</code></th>
<td class="col-last">
<div class="block">Release the lock specified by <code>kc</code> and which was previously
 locked by <code>requester</code>, if it is possible to release it.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">从类继承的方法&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="java.lang中的类或接口" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="java.lang中的类或接口" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="java.lang中的类或接口" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="java.lang中的类或接口" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="java.lang中的类或接口" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="java.lang中的类或接口" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="java.lang中的类或接口" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="java.lang中的类或接口" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="java.lang中的类或接口" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="java.lang中的类或接口" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="java.lang中的类或接口" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>构造器详细资料</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,org.janusgraph.diskstorage.util.time.TimestampProvider)">
<h3>LocalLockMediator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name">LocalLockMediator</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;name,
<a href="../util/time/TimestampProvider.html" title="org.janusgraph.diskstorage.util.time中的接口">TimestampProvider</a>&nbsp;times)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>方法详细资料</h2>
<ul class="member-list">
<li>
<section class="detail" id="lock(org.janusgraph.diskstorage.util.KeyColumn,T,java.time.Instant)">
<h3 id="lock(org.janusgraph.diskstorage.util.KeyColumn,java.lang.Object,java.time.Instant)">lock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">lock</span>&#8203;(<span class="parameters"><a href="../util/KeyColumn.html" title="org.janusgraph.diskstorage.util中的类">KeyColumn</a>&nbsp;kc,
<a href="LocalLockMediator.html" title="LocalLockMediator中的类型参数">T</a>&nbsp;requester,
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="java.time中的类或接口" class="external-link">Instant</a>&nbsp;expires)</span></div>
<div class="block">Acquire the lock specified by <code>kc</code>.
 <p>
 <p>
 For any particular key-column, whatever value of <code>requestor</code> is
 passed to this method must also be passed to the associated later call to
 <a href="#unlock(org.janusgraph.diskstorage.util.KeyColumn,T)"><code>unlock(org.janusgraph.diskstorage.util.KeyColumn, T)</code></a>.
 <p>
 If some requestor <code>r</code> calls this method on a KeyColumn <code>k</code>
 and this method returns true, then subsequent calls to this method by
 <code>r</code> on <code>l</code> merely attempt to update the <code>expiresAt</code>
 timestamp. This differs from typical lock re-entrance: multiple successful
 calls to this method do not require an equal number of calls to
 <code>#unlock()</code>. One <code>#unlock()</code> call is enough, no matter how
 many times a <code>requester</code> called <code>lock</code> beforehand. Note that
 updating the timestamp may fail, in which case the lock is considered to
 have expired and the calling context should assume it no longer holds the
 lock specified by <code>kc</code>.
 <p>
 The current implementation of this method returns true when given an
 <code>expiresAt</code> argument in the past. Future implementations may return
 false instead.</div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>kc</code> - lock identifier</dd>
<dd><code>requester</code> - the object locking <code>kc</code></dd>
<dd><code>expires</code> - instant at which this lock will automatically expire</dd>
<dt>返回:</dt>
<dd>true if the lock is acquired, false if it was not acquired</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unlock(org.janusgraph.diskstorage.util.KeyColumn,T)">
<h3 id="unlock(org.janusgraph.diskstorage.util.KeyColumn,java.lang.Object)">unlock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">unlock</span>&#8203;(<span class="parameters"><a href="../util/KeyColumn.html" title="org.janusgraph.diskstorage.util中的类">KeyColumn</a>&nbsp;kc,
<a href="LocalLockMediator.html" title="LocalLockMediator中的类型参数">T</a>&nbsp;requester)</span></div>
<div class="block">Release the lock specified by <code>kc</code> and which was previously
 locked by <code>requester</code>, if it is possible to release it.</div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>kc</code> - lock identifier</dd>
<dd><code>requester</code> - the object which previously locked <code>kc</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="member-name">toString</span>()</div>
<dl class="notes">
<dt>覆盖:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="java.lang中的类或接口" class="external-link">toString</a></code>&nbsp;在类中&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="java.lang中的类或接口" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="导航">
<li><a href="../../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="nav-bar-cell1-rev">类</li>
<li><a href="class-use/LocalLockMediator.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="sub-nav-list">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>Copyright &#169; 2012&#x2013;2021. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
